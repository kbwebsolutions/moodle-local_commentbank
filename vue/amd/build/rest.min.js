define(["jquery","core/notification"],function(a,b){return{call:function(c,d,e,f){d||(d={}),d.action=c;var g=function(){var a=M.cfg.wwwroot+"/login",c='It appears that you are not logged in. Please <a href="'+a+'">log in</a> to continue';b.alert("Not logged in",c,"OK")},h=function(a){a||(a={status:"jqXHR object invalid",responseText:""}),window.console.log("error - jqXHR",a);var c,d,e;if(a.responseJSON?(c=a.responseJSON.error,d=a.responseJSON.errorcode,e=a.responseJSON.stacktrace):(c="Unknown error",d="unknown",e="unknown - possible bad JSON? "+a.responseText),a.responseJSON&&a.responseJSON.errorcode&&"requireloginerror"===a.responseJSON.errorcode)return g();var f='<div class="ajaxErrors"><div class="ajaxErrorMsg">'+c+'</div><div class="ajaxErrorStatus">Error status code: '+a.status+'</div><div class="ajaxErrorCode">Error code: '+d+'</div><div class="ajaxErrorStackTrace">Stack trace: '+e+"</div></div>";b.alert("An error has occurred",f,"OK")},i=[h];return f&&i.push(f),a.ajax({url:M.cfg.wwwroot+"/report/globalassign/rest.php",data:d,method:e,error:i})},get:function(a,b,c){return this.call(a,b,"GET",c)},post:function(a,b,c){return this.call(a,b,"POST",c)},put:function(a,b,c){return this.call(a,b,"PUT",c)},patch:function(a,b,c){return this.call(a,b,"PATCH",c)},"delete":function(a,b,c){return this.call(a,b,"DELETE",c)}}});